generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL") // A URL de conexão com o banco PostgreSQL
}

model Categoria {
    id       Int       @id @default(autoincrement()) // Usando Int para a chave primária
    nome     String
    produtos Produto[] // Relação 1:N com Produto
}

model Produto {
    id          Int       @id @default(autoincrement()) // Usando Int para a chave primária
    nome        String
    preco       Float
    imagem      String
    categoria   Categoria @relation(fields: [categoriaId], references: [id]) // Relacionamento com Categoria
    categoriaId Int // Referência para o ID da Categoria

    pedidoProdutos PedidoProduto[] // Relação inversa com PedidoProduto
}

model Pedido {
    id       Int             @id @default(autoincrement()) // Usando Int para a chave primária
    mesaId   Int // Relacionamento com a Mesa
    status   String
    produtos PedidoProduto[] // Relação 1:N com PedidoProduto

    mesa Mesa @relation(fields: [mesaId], references: [id]) // Relacionamento com Mesa
}

model PedidoProduto {
    id         Int @id @default(autoincrement()) // Usando Int para a chave primária
    pedidoId   Int // Relacionamento com Pedido
    produtoId  Int // Relacionamento com Produto
    quantidade Int // Quantidade do produto no pedido

    produto Produto @relation(fields: [produtoId], references: [id]) // Relacionamento com Produto
    pedido  Pedido  @relation(fields: [pedidoId], references: [id]) // Relacionamento com Pedido
}

model Mesa {
    id      Int      @id @default(autoincrement()) // Usando Int para a chave primária
    numero  Int // Número da mesa
    pedidos Pedido[] // Relação 1:N com Pedido
}
